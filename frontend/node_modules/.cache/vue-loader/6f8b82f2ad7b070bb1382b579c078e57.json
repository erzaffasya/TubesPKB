{"remainingRequest":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\src\\views\\ListEmployee.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\src\\views\\ListEmployee.vue","mtime":1592960214000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\TubesPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgQlRhYmxlLCBCTW9kYWwsIEJGb3JtQ2hlY2tib3gsIEJQYWdpbmF0aW9uIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdEVtcGxveWVlJywKICBjb21wb25lbnRzOiB7CiAgICAnYi10YWJsZSc6IEJUYWJsZSwKICAgICdiLW1vZGFsJzogQk1vZGFsLAogICAgJ2ItZm9ybS1jaGVja2JveCc6IEJGb3JtQ2hlY2tib3gsCiAgICAnYi1wYWdpbmF0aW9uJzogQlBhZ2luYXRpb24sCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogJycsCiAgICAgIHBlclBhZ2U6IDUsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBlbXBsb3llZTogW10sCiAgICAgIGlzRmlyc3RUaW1lOiB0cnVlLAogICAgICBmaW5pc2hMb2FkaW5nOiBmYWxzZSwKICAgICAgc2hvd0RlYWN0aXZhdGVkOiBmYWxzZSwKICAgICAgZW1wbG95ZWVfd2lsbF9iZV9yZW1vdmVkOiB7CiAgICAgICAgbmlrOiAnJywKICAgICAgICBuYW1hOiAnJywKICAgICAgfSwKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnbmlrJywKICAgICAgICAgIGxhYmVsOiAnSUQnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAnbmFtYScsCiAgICAgICAgICBsYWJlbDogJ05hbWUnLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICB0aFN0eWxlOiB7IG1pbldpZHRoOiAxMDAwIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICdjcmVhdGVkX2F0JywKICAgICAgICAgIGxhYmVsOiAnQ3JlYXRlZCBhdCcsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ2FjdGlvbicsCiAgICAgICAgICBsYWJlbDogJ0FjdGlvbicsCiAgICAgICAgfSwKICAgICAgXSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZEVtcGxveWVlICgpIHsKICAgICAgY29uc3Qgc2VhcmNoUXVlcnkgPSB0aGlzLnNlYXJjaAogICAgICBpZiAoIXRoaXMuc2hvd0RlYWN0aXZhdGVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZW1wbG95ZWUuZmlsdGVyKGZ1bmN0aW9uIChlbXApIHsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5zU2VhcmNoUXVlcnkgPSBlbXAubmFtYS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICByZXR1cm4gKGVtcC5hY3RpdmUgPT09IDEgJiYgY29udGFpbnNTZWFyY2hRdWVyeSkKICAgICAgICB9KQogICAgICB9IHJldHVybiB0aGlzLmVtcGxveWVlCiAgICB9LAogICAgcm93cyAoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVkRW1wbG95ZWUubGVuZ3RoCiAgICB9LAogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGEgKCkgewogICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9lbXBsb3llZScpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkKICAgICAgICAgIHRoaXMuZW1wbG95ZWUgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB0aGlzLmZpbmlzaExvYWRpbmcgPSB0cnVlCiAgICAgICAgfSkKICAgIH0sCiAgICB3aWxsRGVhY3RpdmF0ZSAobmlrLCBuYW1hKSB7CiAgICAgIHRoaXMuZW1wbG95ZWVfd2lsbF9iZV9yZW1vdmVkID0gewogICAgICAgIG5pazogbmlrLAogICAgICAgIG5hbWE6IG5hbWEsCiAgICAgIH0KICAgICAgdGhpcy4kcmVmc1sncmVtb3ZlLWNvbmZpcm1hdGlvbiddLnNob3coKQogICAgfSwKICAgIGRlYWN0aXZhdGUgKCkgewogICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9yZW1vdmVfZW1wbG95ZWUvJyArIHRoaXMuZW1wbG95ZWVfd2lsbF9iZV9yZW1vdmVkLm5paykKICAgICAgICAudGhlbigoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["ListEmployee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListEmployee.vue","sourceRoot":"src/views","sourcesContent":["<!-- eslint-disable -->\n<template>\n  <v-container id=\"attd-list\" fluid tag=\"section\">\n    <v-row justify=\"center\">\n      <v-col \n        cols=\"12\"\n        md=\"12\">\n        <base-material-card\n          icon=\"mdi-account-multiple\"\n          title=\"Employee List\"\n          class=\"px-5 py-3\"\n        >\n          <div\n          align=\"center\"\n          v-if=\"!finishLoading\">\n          <v-progress-circular\n            indeterminate\n            rotate\n            color=\"success\"\n          >\n          </v-progress-circular>\n          </div>\n          <div>\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search employee by name\"\n            />\n            <b-table\n              id=\"table-employee\"\n              v-if=\"finishLoading\"\n              :per-page=\"perPage\"\n              :current-page=\"currentPage\"\n              striped \n              show-empty\n              hover\n              head-variant=\"dark\"\n              :fields=\"fields\"\n              :items=\"computedEmployee\">\n              <template v-slot:cell(action)=\"row\">\n                <v-btn v-if=\"row.item.active == 1\" color=\"red\" min-width=200 @click=\"willDeactivate(row.item.nik, row.item.nama)\" class=\"mr-1\">\n                  deactivate\n                </v-btn>\n                <v-btn v-if=\"row.item.active == 0\" color=\"grey\" disabled min-width=200 class=\"mr-1\">\n                  deactivated\n                </v-btn>\n              </template>\n            </b-table>\n            <b-pagination\n              v-model=\"currentPage\"\n              :total-rows=\"rows\"\n              :per-page=\"perPage\"\n              aria-controls=\"table-employee\"\n              pills\n            ></b-pagination>\n          </div>\n          <b-modal centered ref=\"remove-confirmation\" title=\"Confirmation\" @ok=\"deactivate\">\n            <p class=\"my-4\">Are you sure you want to remove \"{{ employee_will_be_removed.nama }}\" with ID number \"{{ employee_will_be_removed.nik }}?\"</p>\n          </b-modal>\n          <div align=\"right\" class=\"mb-1\">\n            <b-form-checkbox\n              v-model=\"showDeactivated\"\n            >\n              show deactivated employees \n            </b-form-checkbox>\n          </div>\n        </base-material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  import axios from 'axios'\n  import { BTable, BModal, BFormCheckbox, BPagination } from 'bootstrap-vue'\n\n  export default {\n    name: 'ListEmployee',\n    components: {\n      'b-table': BTable,\n      'b-modal': BModal,\n      'b-form-checkbox': BFormCheckbox,\n      'b-pagination': BPagination,\n    },\n    data () {\n      return {\n        search: '',\n        perPage: 5,\n        currentPage: 1,\n        employee: [],\n        isFirstTime: true,\n        finishLoading: false,\n        showDeactivated: false,\n        employee_will_be_removed: {\n          nik: '',\n          nama: '',\n        },\n        fields: [\n          {\n            key: 'nik',\n            label: 'ID',\n          },\n          {\n            key: 'nama',\n            label: 'Name',\n            sortable: true,\n            thStyle: { minWidth: 1000 },\n          },\n          {\n            key: 'created_at',\n            label: 'Created at',\n            sortable: true,\n          },\n          {\n            key: 'action',\n            label: 'Action',\n          },\n        ],\n      }\n    },\n    computed: {\n      computedEmployee () {\n        const searchQuery = this.search\n        if (!this.showDeactivated) {\n          return this.employee.filter(function (emp) {\n            const containsSearchQuery = emp.nama.toLowerCase().includes(searchQuery.toLowerCase())\n            return (emp.active === 1 && containsSearchQuery)\n          })\n        } return this.employee\n      },\n      rows () {\n        return this.computedEmployee.length\n      },\n    },\n    mounted () {\n      this.fetchData()\n    },\n    methods: {\n      fetchData () {\n        axios\n          .get('http://localhost:5000/employee')\n          .then(response => {\n            // console.log(response.data)\n            this.employee = response.data\n            this.finishLoading = true\n          })\n      },\n      willDeactivate (nik, nama) {\n        this.employee_will_be_removed = {\n          nik: nik,\n          nama: nama,\n        }\n        this.$refs['remove-confirmation'].show()\n      },\n      deactivate () {\n        axios\n          .get('http://localhost:5000/remove_employee/' + this.employee_will_be_removed.nik)\n          .then(() => location.reload())\n      },\n    },\n  }\n</script>\n\n<style>\n</style>\n"]}]}